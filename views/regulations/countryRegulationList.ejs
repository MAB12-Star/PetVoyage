<% layout('layouts/boilerplate') %>

<div class="background-section mt-2">
  <div class="container">
    <div class="row g-4 align-items-start">

      <!-- LEFT: Hero + Nav + Country picker -->
      <div class="col-lg-9">

        <!-- Hero Section -->
        <div class="bg-light py-5 text-center border-bottom mt-1">
          <img
            src="/images/PetVoyageLogo.png"
            class="img-fluid rounded-top d-block mx-auto"
            alt="PetVoyage Logo - Pet Travel Regulations and Policies"
            width="400" height="400"
          />
          <h1 class="fw-bold display-5">Travel Smarter with Pets</h1>
          <p class="fs-5 text-muted">Instantly explore pet policies by airline and country. Fly with peace of mind.</p>

          <!-- Navigation Strip -->
          <div class="mt-3">
            <!-- Desktop -->
            <div class="d-none d-md-flex justify-content-center gap-3 flex-wrap desktop-icon-nav">
              <a href="/getCountryRegulationList" class="btn btn-outline-secondary px-4 py-2 text-center">
                <i class="bi bi-globe-americas d-block fs-3"></i><small>Country Policies</small>
              </a>
              <a href="/regulations/searchFlights" class="btn btn-outline-secondary px-4 py-2 text-center">
                <i class="bi bi-airplane d-block fs-3"></i><small>Search Flights</small>
              </a>
              <a href="/regulations/airlineList" class="btn btn-outline-secondary px-4 py-2 text-center">
                <i class="bi bi-card-list d-block fs-3"></i><small>Airline Policies</small>
              </a>
              <a href="/findAVet" class="btn btn-outline-secondary px-4 py-2 text-center">
                <i class="bi bi-hospital d-block fs-3"></i><small>Find a Vet</small>
              </a>
              <a href="/blog" class="btn btn-outline-secondary px-4 py-2 text-center">
                <i class="bi bi-journal-text d-block fs-3"></i><small>Blog</small>
              </a>
            </div>

            <!-- Mobile -->
            <div class="d-flex d-md-none justify-content-between text-center mt-1 px-2">
              <div class="mobile-icon-group">
                <a href="/regulations/newSearch" class="square-icon btn btn-outline-secondary">
                  <i class="bi bi-globe-americas fs-3"></i>
                </a>
                <small>Country</small>
              </div>
              <div class="mobile-icon-group">
                <a href="/regulations/searchFlights" class="square-icon btn btn-outline-secondary">
                  <i class="bi bi-airplane fs-3"></i>
                </a>
                <small>Flights</small>
              </div>
              <div class="mobile-icon-group">
                <a href="/regulations/airlineList" class="square-icon btn btn-outline-secondary">
                  <i class="bi bi-card-list fs-3"></i>
                </a>
                <small>Airlines</small>
              </div>
              <div class="mobile-icon-group">
                <a href="/findAVet" class="square-icon btn btn-outline-secondary">
                  <i class="bi bi-hospital fs-3"></i>
                </a>
                <small>Vet</small>
              </div>
              <div class="mobile-icon-group">
                <a href="/blog" class="square-icon btn btn-outline-secondary">
                  <i class="bi bi-journal-text fs-3"></i>
                </a>
                <small>Blog</small>
              </div>
            </div>
          </div>

          <!-- Country Selection -->
          <div class="mt-4">
            <form id="countryForm" class="row justify-content-center">
              <div class="col-12 col-md-8">
                <label for="countrySelect" class="form-label fs-5 fw-semibold">Select a Destination Country</label>
                <div class="input-group input-group-lg shadow-sm">
                  <select id="countrySelect" name="country" class="form-select" onchange="submitCountry()">
                    <option disabled selected value="">-- Choose a Country --</option>
                    <% countries.forEach(country => { %>
                      <option value="<%= country %>"><%= country %></option>
                    <% }) %>
                  </select>
                  <button class="btn btn-primary" type="button" onclick="submitCountry()">
                    <i class="bi bi-search"></i>
                  </button>
                </div>
              </div>
            </form>
          </div>

        </div><!-- /Hero -->
      </div><!-- /col-lg-9 -->

      <!-- RIGHT: AI (sticky on desktop) -->
      <aside class="col-lg-3 d-none d-lg-block">
        <div class="sticky-lg-top" style="top:1.5rem">
          <%- include('../partials/chatGPT', { idSuffix: 'home' }) %>
        </div>
      </aside>

      <!-- On mobile, show AI below content -->
      <div class="col-12 d-lg-none">
        <%- include('../partials/chatGPT', { idSuffix: 'home-mobile' }) %>
      </div>

    </div><!-- /row -->
  </div><!-- /container -->
</div><!-- /background-section -->

<script>
  function submitCountry() {
    const select = document.querySelector('select[name="country"]');
    const selectedCountry = select.value;
    if (selectedCountry) {
      window.location.href = '/country/' + encodeURIComponent(selectedCountry);
    }
  }
</script>
